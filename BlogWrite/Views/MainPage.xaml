<Page
    x:Class="BlogWrite.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:BlogWrite.Models"
     Background="Transparent"
    mc:Ignorable="d">

    <Grid x:Name="ContentArea" Background="{ThemeResource NavigationViewDefaultPaneBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="0" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <Grid Grid.Row="1" Grid.Column="0" Margin="6,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal">

                <AppBarButton Icon="Add" Label="Add" Command="{x:Bind ViewModel.FeedAddCommand}" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1" >

                </AppBarButton>

                <AppBarButton Icon="Remove" Label="Remove" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1" >

                </AppBarButton>

                <AppBarButton Icon="Import" Label="Import" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1" >

                </AppBarButton>

                <AppBarButton Icon="Save" Label="Export" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1" >

                </AppBarButton>

            </StackPanel>

            <Border Grid.Row="1" Margin="0,0,6,6" Background="{ThemeResource NavigationViewContentBackground}" CornerRadius="{ThemeResource NavigationViewContentChildGridCornerRadius}" BorderBrush="{ThemeResource NavigationViewContentGridBorderBrush}" BorderThickness="{ThemeResource NavigationViewContentChildGridBorderThickness}">

                <TreeView Grid.Column="0" MinWidth="300" Width="350" MaxWidth="400" ItemsSource="{x:Bind ViewModel.Services, Mode=OneWay}" SelectedItem="{x:Bind ViewModel.SelectedTreeViewItem, Mode=TwoWay}" SelectedNode="{x:Bind ViewModel.SelectedTreeViewNode, Mode=OneWay}" Margin="3,6,3,6">
                    <TreeView.ItemTemplate>

                        <DataTemplate x:DataType="model:NodeTree">
                            <TreeViewItem ItemsSource="{x:Bind Children}" Content="{x:Bind Name}" Padding="3"/>
                            <!--
                        <StackPanel>
                            <Border x:Name="PanelBackground" Background="Transparent" CornerRadius="0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="34"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                                        
                                        <Viewbox Width="12" Height="12" Margin="0 0 4 2" IsHitTestVisible="False">
                                            <Canvas Width="18" Height="18">
                                                <Path Data="{Binding PathIcon}" Fill="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType={x:Type TreeViewItem}}}" />
                                            </Canvas>
                                        </Viewbox>
                                        
                                        <TextBlock x:Name="NodeTextBlock" Text="{Binding Path=Name}" Padding="4" IsHitTestVisible="False"/>
                                    </StackPanel>

                                    <TextBox Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" x:Name="RenameTextBox" Text="{Binding Name, Mode=TwoWay}" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="-5 0 3 0" Width="Auto" Visibility="Collapsed" LostFocus="RenameTextBox_LostFocus" KeyUp="RenameTextBox_KeyUp">

                                    </TextBox>

                                    <TextBlock Grid.Column="2" Text="{Binding SubNodeText}" Margin="9 3 3 3" HorizontalAlignment="Right"></TextBlock>
                                </Grid>
                            </Border>
                        </StackPanel>-->
                        </DataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>

            </Border>

        </Grid>

        <Grid Grid.Row="1" Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            
            <StackPanel Grid.Row="0" Orientation="Horizontal">
<!--
                <AppBarButton Label="Archive" ToolTipService.ToolTip="View in internal browser" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1">
                    <AppBarButton.Icon>
                        <PathIcon>
                            <PathIcon.Data>
                                M5.12,5L5.93,4H17.93L18.87,5M12,17.5L6.5,12H10V10H14V12H17.5L12,17.5M20.54,5.23L19.15,3.55C18.88,3.21 18.47,3 18,3H6C5.53,3 5.12,3.21 4.84,3.55L3.46,5.23C3.17,5.57 3,6 3,6.5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V6.5C21,6 20.83,5.57 20.54,5.23Z
                            </PathIcon.Data>
                        </PathIcon>
                    </AppBarButton.Icon>
                </AppBarButton>
-->
                <AppBarButton Label="View" ToolTipService.ToolTip="View in internal browser" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1" >
                    <AppBarButton.Icon>
                        <PathIcon>
                            <PathIcon.Data>
                                M12,10L8,14H11V20H13V14H16M19,4H5C3.89,4 3,4.9 3,6V18A2,2 0 0,0 5,20H9V18H5V8H19V18H15V20H19A2,2 0 0,0 21,18V6A2,2 0 0,0 19,4Z
                            </PathIcon.Data>
                        </PathIcon>
                    </AppBarButton.Icon>
                </AppBarButton>

                <AppBarButton Label="Open" ToolTipService.ToolTip="Open in external browser" IsCompact="False" VerticalAlignment="Center" Margin="0" Padding="0" Opacity="1" >
                    <AppBarButton.Icon>
                        <PathIcon>
                            <PathIcon.Data>
                                M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z
                            </PathIcon.Data>
                        </PathIcon>
                    </AppBarButton.Icon>
                </AppBarButton>

            </StackPanel>
            
            <Border Grid.Row="1" Margin="0,0,6,6" Background="{ThemeResource NavigationViewContentBackground}" CornerRadius="{ThemeResource NavigationViewContentChildGridCornerRadius}" BorderBrush="{ThemeResource NavigationViewContentGridBorderBrush}" BorderThickness="{ThemeResource NavigationViewContentChildGridBorderThickness}">
                <Grid>

                    <ListView ItemsSource="{x:Bind ViewModel.Entries, Mode=OneWay}" SelectedItem="{x:Bind ViewModel.SelectedListViewItem, Mode=OneWay}" SelectionMode="Single" Margin="3,6,3,6">
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="model:EntryItem">

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Ellipse x:Name="Ellipse"
                    Grid.RowSpan="2"
                    Width ="32"
                    Height="32"
                    Margin="6"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Fill="{ThemeResource SystemControlBackgroundBaseMediumBrush}"/>
                                    <TextBlock Grid.Column="1"
                    Text="{x:Bind Name}"
                    x:Phase="1"
                    Style="{ThemeResource BaseTextBlockStyle}"
                    Margin="12,6,0,0"/>
                                    <TextBlock  Grid.Column="1"
                    Grid.Row="1"
                    Text="{x:Bind Author}"
                    x:Phase="2"
                    Style="{ThemeResource BodyTextBlockStyle}"
                    Margin="12,0,0,6"/>
                                </Grid>

                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                    
                </Grid>
            </Border>

        </Grid>

        <Grid Grid.Row="2" Grid.ColumnSpan="2" Margin="6,0,6,6" Visibility="Collapsed">
            <TextBox x:Name="DebugTextBox" HorizontalAlignment="Stretch" TextWrapping="Wrap" Padding="6 6 24 6" VerticalAlignment="Stretch" Margin="0" MinHeight="240" MaxHeight="240" ScrollViewer.VerticalScrollBarVisibility="Visible">

            </TextBox>
        </Grid>
        
    </Grid>
</Page>
